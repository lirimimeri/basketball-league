<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin pannel</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  </head>
  <body>
    <script>
      var home_id
      var home_score
      var away_id
      var away_score
      var date
      var week_id
    </script>
    <h1>Admin Pannel</h1>
    <div class="matches">
      <form id="addMatchForm">
        <input type="hidden" />
        <h5>Edit matches</h5>
        Week: <input type="number" class="week" id="week_id" />
        <br />
        Date: <input type="date" class="week" id="date" />
        <br />
        <select id="select-home">
          <option value="default" disabled>Home</option>
        </select>
        <input type="number" class="scores" id="home_score" />
        <input type="number" class="scores" id="away_score" />
        <select id="select-away">
          <option value="default" disabled>Away</option> </select
        ><br />
        <button type="submit">Submit</button>
      </form>
    </div>
    <script>

      $("#addMatchForm").submit(function (e) {
        e.preventDefault();
        validate()
        try
        {
          $.ajax({
            url: "http://134.122.87.241/api/matches",
            data: $.param({
              "week_id": week_id,
              "date": date,
              "home_id": home_id,
              "home_score": home_score,
              "away_score": away_score,
              "away_id": away_id,
            }),
            type: "POST",
            headers: {
              "Authorization": `Bearer ${sessionStorage.getItem("token")}`
            },
          });
        }
        catch(error){
          alert(error)
        }
      });
      function validate()
      {
        home_score = document.getElementById("home_score").value
        away_score = document.getElementById("away_score").value
        home_id = document.getElementById("select-home").value
        date = document.getElementById("date").value
        week_id = document.getElementById("week_id").value
        away_id = document.getElementById("select-away").value

        if(home_id === "" || away_id === "" || week_id === "" || home_score === "" || 
          away_score === "" || date === "")
          {
            alert("*please fill all the parameters")
          }
      }
    </script>
  </body>
  <script>
    alert(sessionStorage.getItem("token"));
  </script>
  <script src="./script.js"></script>
</html>
